<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>{{title}}</title>
    <meta name=viewport content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="{{title}}">
    <meta property="og:site_name" content="welltypedwit.ch">
    <meta property="og:description" content="{{title}}">
    <meta property="twitter:title" content="{{title}}">
    <meta property="twitter:description" content="{{title}}">
    <meta property="twitter:url" content="{{url}}">
    <meta property="twitter:type" content="summary">
    <meta property="twitter:domain" content="welltypedwit.ch">
    <meta name="twitter:card" content="summary_large_image">
    <!--Fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600;700&family=Inria+Sans:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/main.css">

    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">

    <!--Icons-->
    <script src="https://kit.fontawesome.com/e4faccddf2.js" crossorigin="anonymous"></script>



    <!--KaTeX-->
    <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"
        integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"
        integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja"
        crossorigin="anonymous"></script>
    <!-- Mostly Generated by pandoc -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var mathElements = document.getElementsByClassName("math");
            var macros = [];
            for (var i = 0; i < mathElements.length; i++) {
                var texText = mathElements[i].firstChild;
                if (mathElements[i].tagName == "SPAN") {
                    katex.render(texText.data, mathElements[i], {
                        displayMode: mathElements[i].classList.contains('display'),
                        throwOnError: false,
                        macros: macros,
                        fleqn: false
                    });
                }
            }

            // replace KaTeX colors with CSS variables so that we can control them in light/dark mode
            document.querySelectorAll(".mrel").forEach(element => {
                if (element.style.color == "blue") {
                    element.style.color = "var(--katex-blue)"
                } else if (element.style.color == "red") {
                    element.style.color = "var(--katex-red)"
                } else if (element.style.color == "purple") {
                    element.style.color = "var(--katex-purple)"
                }
            })

            // replace ¤ characters in source code with '.diff-area' spans and add a '.diff' class to the 
            // corresponding pre element to adjust the style correctly.
            // Ideally this would be done at compile time, but that's more difficult and will not work for katex segments.
            document.querySelectorAll("pre.sourceCode").forEach(pre => {
                let html = pre.innerHTML

                if (!/¤/.test(html)) {
                    // This code block is not a diff block
                    return
                }

                let matchingClosing = false
                while (/¤/.test(html)) {
                    if (!matchingClosing) {
                        html = html.replace(/¤/, "<span class='diff-area'>")
                    } else {
                        html = html.replace(/¤/, "</span>")
                    }

                    matchingClosing = !matchingClosing
                }
                if (matchingClosing) {
                    console.error("unmatched diff block in source code", pre)
                    return
                }

                pre.innerHTML = html
                pre.classList.add("diff")
            })
        })
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            function reflowGrids() {
                document.querySelectorAll(".grid.parent").forEach(parent => {
                    parent.classList.remove("column1")
                    let hasOverflow = false
                    for (child of parent.children) {
                        // We need to check grandchildren because of how overflow is set up for
                        // code elements
                        for (grandchild of child.children) {
                            // check for horizontal overflow
                            if (grandchild.scrollWidth > grandchild.clientWidth) {
                                hasOverflow = true
                                break
                            }
                        }
                        // Ugh, just give me labelled break
                        if (hasOverflow) {
                            break
                        }
                    }
                    if (hasOverflow) {
                        parent.classList.add("column1")
                    } else {
                        parent.classList.remove("column1")
                    }
                })
            }
            reflowGrids()
            window.addEventListener("resize", reflowGrids)
        })
    </script>

</head>

<body>
    <div class="underline-wrapper">
        <nav class="main-nav">
            <a href="/" class="site-title">welltypedwit.ch</a>
        </nav>
    </div>

    <article class="post">
        <h1 class="post-header">{{title}}</h1>
        <span class="date">{{date}}</span>
        {{body}}
        <script src="/js/main.js"></script>
    </article>
</body>

</html>